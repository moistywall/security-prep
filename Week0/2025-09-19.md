# 手順メモ

## BurpSuite プロキシ設定方法

**前提**：Windows の Docker は `-p 3001:80` などでホスト（Windows）の`0.0.0.0:3001`に公開済み。VirtualBox の Kali は _Bridged_ か _NAT（ポートフォワーディング済）_ のどちらか。

### 1) Windows 側：Windows のローカル IP を確認

PowerShell / CMD:

`ipconfig`

→ `IPv4 Address`（例：`192.168.1.25`）を控える。

確認（Windowsでリッスン確認）:

`# ポート3001がLISTENされているか netstat -an | findstr 3001 # または docker ps docker port <コンテナ名またはID>`

必要なら Windows ファイアウォールでポート 3001 の受信を許可（テスト用に一時許可して確認）。

### 2) Kali（VM）側：Windows IP にアクセスできるか確認

Kali ターミナルで：

`# Windowsホストに対してHTTPで到達するか curl -I http://<Windows_IP>:3001/ # 例 curl -I http://192.168.1.25:3001/`

- `HTTP/1.1 200 OK` 等が返ればネットワーク経路はOK。
    
- 返らない場合は VirtualBox のネットワーク設定（Bridged 推奨）か Windows ファイアウォールを確認。
    

### 3) Burp（Kali上）を起動し Listener を確認

- Burp を起動 → `Proxy` → `Options` → `Proxy Listeners`
    
    - デフォルトで `127.0.0.1:8080` があるはず（ブラウザと同じ Kali 上ならこれでOK）。
        
    - `127.0.0.1:8080` が無ければ `Add` で `Bind to address: 127.0.0.1` Port `8080` を追加。
        

### 4) Kali のブラウザ（Firefox）にプロキシ設定

Firefox の手順：

- `設定` → `一般` → `ネットワーク設定` → `接続設定` → `手動でプロキシを設定`
    
    - HTTP Proxy: `127.0.0.1` Port `8080`
        
    - 「このプロキシをすべてのプロトコルに使用」にチェック
        
- 保存。
    

> 注意：`localhost`（127.0.0.1）経由でのアクセスならこれで Burp 経由になりますが、今回はアクセス先が `http://<Windows_IP>:3001` なので **ブラウザで URL に Windows の IP を指定** してください：  
> `http://192.168.1.25:3001/` のように。

### 5) Burp CA（HTTPS を傍受したい場合）

- Kali のブラウザで `http://burp` か `http://127.0.0.1:8080` にアクセスすると Burp のインターフェースが見えるはず。そこから **CA certificate** のダウンロードリンクあり。
    
- Firefox の証明書管理からインポート：  
    `設定 > プライバシーとセキュリティ > 証明書 > 証明書を表示 > インポート`  
    インポート時に「この証明書を Web サイトの識別に使用して信頼する」にチェック。
    

### 6) 動作確認

- Burp の `Proxy -> Intercept` を `on` にし、Kali の Firefox で `http://<Windows_IP>:3001/` を開く。
    
- Burp にリクエストが止まれば成功。`Intercept` を `off` にするとページが表示される。

# 疑問

## docker container のポートマッピングとは何か

docker ps の結果は以下
```
C:\Users\PCUSER>docker ps
CONTAINER ID   IMAGE                   COMMAND                  CREATED      STATUS      PORTS                    NAMES
5ebe10d57e3e   vulnerables/web-dvwa    "/main.sh"               2 days ago   Up 2 days   0.0.0.0:3001->80/tcp     dvwa
3391fbab815e   bkimminich/juice-shop   "/nodejs/bin/node /j…"   2 days ago   Up 2 days   0.0.0.0:3000->3000/tcp   unruffled_tu
```

## burp でのプロキシの設定になぜ CA が必要なのか

## proxy とはそもそも何か

